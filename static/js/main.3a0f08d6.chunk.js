(this.webpackJsonpctc2=this.webpackJsonpctc2||[]).push([[0],{119:function(e,t,n){e.exports=n(154)},124:function(e,t,n){},125:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(19),i=n.n(o),l=(n(124),n(16)),s=n(23),c=n(10),u=n(11),d=n(13),h=n(14),m=(n(125),n(103)),f=n(8),p=n(7),v=n(5),g=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"setContext",value:function(e){Object(f.a)(Object(p.a)(n.prototype),"setContext",this).call(this,e),e.setLineDash([this.options.dash,this.options.dash])}}]),n}(v.e);function y(e,t,n){return"dash"===n?function(e,t){var n=e.corner_offset,r=e.cell_size,a=function(e,n){return t.find((function(t){return t[0]===e&&t[1]===n}))},o=[[0,n],[n,0],[r-n,0],[r,n],[r,r-n],[r-n,r],[n,r],[0,r-n]],i=[];return e.each_cell((function(e){var t=e.x,r=e.y;if(a(t,r)){var l=a(t,r-1),s=a(t,r+1),c=a(t-1,r),u=a(t+1,r),d=a(t-1,r-1),h=a(t+1,r-1),m=a(t-1,r+1),f=a(t+1,r+1),p=[],v=function(e,t){p.push(new g(e,[[t[0]-e[0],t[1]-e[1]]],{dash:4,strokeWidth:2,stroke:"black"}))};if(!c){var y=e.corner_pos[0],b=e.corner_pos[3];l&&((y=o[1].slice(0))[1]-=d?n:0),s&&((b=o[6].slice(0))[1]+=m?n:0),v(y,b)}if(!u){var k=e.corner_pos[1],w=e.corner_pos[2];l&&((k=o[2].slice(0))[1]-=h?n:0),s&&((w=o[5].slice(0))[1]+=f?n:0),v(k,w)}if(!l){var x=e.corner_pos[0],E=e.corner_pos[1];c&&((x=o[0].slice(0))[0]-=d?n:0),u&&((E=o[3].slice(0))[0]+=h?n:0),v(x,E)}if(!s){var j=e.corner_pos[3],S=e.corner_pos[2];c&&((j=o[7].slice(0))[0]-=m?n:0),u&&((S=o[4].slice(0))[0]+=f?n:0),v(j,S)}p.forEach((function(t){return e.r.add(t)})),i=i.concat(p)}})),i}(e,t):"edge"===n?function(e,t){var n=function(e,n){return t.find((function(t){return t[0]===e&&t[1]===n}))},r=[[0,0],[e.cell_size,0],[e.cell_size,e.cell_size],[0,e.cell_size]],a=[];return e.each_cell((function(e){var t=e.x,o=e.y;if(n(t,o)){var i=n(t,o-1),l=n(t,o+1),s=n(t-1,o),c=n(t+1,o),u=[],d=function(e,t){u.push(new v.e(e,[[t[0]-e[0],t[1]-e[1]]],{strokeWidth:4,stroke:"black"}))};if(!s)d(r[0],r[3]);if(!c)d(r[1],r[2]);if(!i)d(r[0],r[1]);if(!l)d(r[3],r[2]);u.forEach((function(t){return e.r.add(t)})),a.push.apply(a,u)}})),a}(e,t):void 0}var b=n(45),k=n(4),w=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"trace",value:function(e){Object(f.a)(Object(p.a)(n.prototype),"trace",this).call(this,e);var t=[{x:0,y:0}].concat(this.points),r=t[t.length-1],a=t[t.length-2],o=r.x-a.x,i=a.y-r.y,l=Math.atan2(i,o),s=this.options.arrowAngle*Math.PI/180,c=this.options.arrow*Math.cos(l+s),u=this.options.arrow*Math.sin(l+s),d=this.options.arrow*Math.cos(l-s),h=this.options.arrow*Math.sin(l-s);return e.moveTo(r.x,r.y),e.lineTo(r.x-c,r.y+u),e.moveTo(r.x,r.y),e.lineTo(r.x-d,r.y+h),this}}],[{key:"defaultOptions",get:function(){return Object(k.a)(Object(k.a)({},Object(f.a)(Object(p.a)(n),"defaultOptions",this)),{},{arrow:10,arrowAngle:45})}}]),n}(v.e);function x(e,t){return[t[0]*e+e/2,t[1]*e+e/2]}function E(e,t,n,r){var a,o=e.cell_size,i=J[r].match(/[.\d]+/g).map((function(e){return e>1?e/255:+e})),s=Object(b.a)(v.b,Object(l.a)(i));s.red=s.red*s.alpha+1*(1-s.alpha),s.green=s.green*s.alpha+1*(1-s.alpha),s.blue=s.blue*s.alpha+1*(1-s.alpha),s.alpha=1;var c=x(o,t[0]),u=t.map((function(e){var t=x(o,e);return{x:t[0]-c[0],y:t[1]-c[1]}})),d=[];if("thermo"===n){var h=.3*o,m=new v.a(c,.4*o,{fill:s}),f=new v.e(c,u.slice(1),{stroke:s,strokeWidth:h,join:v.e.joins.miter});d.push(m,f)}else if("thin"===n){var p=.05*o,g=new v.e(c,u.slice(1),{stroke:s,strokeWidth:p,join:v.e.joins.miter});d.push(g)}else if("fat"===n){var y=.3*o,k=new v.e(c,u.slice(1),{stroke:s,strokeWidth:y,join:v.e.joins.miter});d.push(k)}else if("roundborder"===n){var E=new v.e(c,u.slice(1),{stroke:s,strokeWidth:.8*o,join:v.e.joins.round}),j=new v.e(c,u.slice(1),{stroke:"white",strokeWidth:.67*o,join:v.e.joins.round});d.push(E,j)}else if("border"===n){var S=new v.e(c,u.slice(1),{stroke:s,strokeWidth:.8*o,cap:v.e.caps.square,join:v.e.joins.round}),W=new v.e(c,u.slice(1),{stroke:"white",strokeWidth:.67*o,cap:v.e.caps.square,join:v.e.joins.round});d.push(S,W)}else if("roundfill"===n){var O=new v.e(c,u.slice(1),{stroke:s,strokeWidth:.8*o,join:v.e.joins.round});d.push(O)}else if("squarefill"===n){var C=new v.e(c,u.slice(1),{stroke:s,strokeWidth:.8*o,cap:v.e.caps.square,join:v.e.joins.round});d.push(C)}else if("arrowcircle"===n||"arrow"===n){var _=.07*o;if(u.length>1){var z=new w(c,u.slice(1),{stroke:s,strokeWidth:_,arrow:.3*o});d.push(z)}var D=new v.e(c,u.slice(1),{stroke:s,strokeWidth:_,join:v.e.joins.miter});if(d.push(D),"arrowcircle"===n){var M=new v.a(c,.4*o,{fill:"white",strokeWidth:_,stroke:s});d.push(M)}}return(a=e.underlay2).add.apply(a,d),e.scene.render(),d}var j=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"setContext",value:function(e){Object(f.a)(Object(p.a)(n.prototype),"setContext",this).call(this,e),e.setLineDash([this.options.dash,this.options.dash])}}]),n}(v.a);var S=n(56),W=n.n(S),O=n(57),C=n.n(O),_=n(50),z={},D=0,M=null,A=null,B=null,R=0,L=0,I=0,P=0,U=0,G=0,T="normal",q=!1,N=0,H=0,K=0,J=["rgba(0, 0, 0, 1)","rgba(207, 207, 207, 0.5)","rgba(255, 255, 255, 1)","rgba(163, 224, 72, 0.5)","rgba(210, 59, 231, 0.5)","rgba(235, 117, 50, 0.5)","rgba(226, 38, 31, 0.5)","rgba(247, 208, 56, 0.5)","rgba(52, 187, 230, 0.5)","rgba(140, 140, 140, 0.5)","rgba(80, 80, 80, 0.5)","rgba(20, 20, 20, 0.5)"],F=0,X="normal",Z=null,$=!1,Q=null,V=[],Y=[],ee=!1,te=[],ne=null,re=null,ae=null,oe=!1,ie=null,le=null,se=[];var ce={font:"sans-serif",cursor:v.c.cursors.pointer},ue={font:"sans-serif",fill:"rgb(29, 106, 229)",cursor:v.c.cursors.pointer},de={font:"sans-serif",fill:"rgb(29, 106, 229)",cursor:v.c.cursors.pointer};function he(e,t,n,r){var a,o=r;e.normal?(o=D,a=e.normal,e=e.symcont):o>0?n="gray":o=e.bsize,"#"!==t[0]&&a?a.text=t:function(e,t,n,r,a){var o,i=+t.substr(1,1),l=+t.substr(2,1),s="string"===typeof n?n:J[n],c=r/2,u=r/2;if("#"!==t[0]&&(i=0),0===i){var d={font:"sans-serif",fontSize:r};o=new v.j([0,0],t,d);var h=v.j.measure(t,d);o.position.x=(r-h.width)/2,a=!0}if(1===i&&(1===l&&(o=new v.a([c,u],.8*r/2,{fill:s,stroke:"black",strokeWidth:2})),2===l&&(o=new v.a([c,u],.8*r/2,{fill:"white",stroke:s,strokeWidth:2})),3===l&&(o=new j([c,u],.8*r/2,{fill:s,stroke:"black",strokeWidth:2,dash:4})),4===l&&(o=new j([c,u],.8*r/2,{fill:"white",stroke:s,strokeWidth:2,dash:4}))),2===i){var m=.05*r,f=.15*r;1===l&&(o=new w([c,u],[[r-c-m,r-u-m]],{stroke:s,strokeWidth:3,arrow:.3*r})),2===l&&(o=new w([c,u],[[r-c-m,-u+m]],{stroke:s,strokeWidth:3,arrow:.3*r})),3===l&&(o=new w([c,u],[[-c+m,-u+m]],{stroke:s,strokeWidth:3,arrow:.3*r})),4===l&&(o=new w([c,u],[[-c+m,r-u-m]],{stroke:s,strokeWidth:3,arrow:.3*r})),5===l&&(o=new w([f,u],[[r-2*f,0]],{stroke:s,strokeWidth:3,arrow:.2*r})),6===l&&(o=new w([r-f,u],[[-(r-2*f),0]],{stroke:s,strokeWidth:3,arrow:.2*r})),7===l&&(o=new w([c,f],[[0,r-2*f]],{stroke:s,strokeWidth:3,arrow:.2*r})),8===l&&(o=new w([c,r-f],[[0,-(r-2*f)]],{stroke:s,strokeWidth:3,arrow:.2*r}))}if(3===i){var p=.15*r;1===l&&(o=new w([p,p],[[r-2*p,0]],{stroke:s,strokeWidth:2,arrow:.1*r,arrowAngle:45})),2===l&&(o=new w([r-p,p],[[-(r-2*p),0]],{stroke:s,strokeWidth:2,arrow:.1*r,arrowAngle:45})),3===l&&(o=new w([r-p,p],[[0,r-2*p]],{stroke:s,strokeWidth:2,arrow:.1*r})),4===l&&(o=new w([r-p,r-p],[[0,-(r-2*p)]],{stroke:s,strokeWidth:2,arrow:.1*r})),5===l&&(o=new w([r-p,r-p],[[-(r-2*p),0]],{stroke:s,strokeWidth:2,arrow:.1*r})),6===l&&(o=new w([p,r-p],[[r-2*p,0]],{stroke:s,strokeWidth:2,arrow:.1*r})),7===l&&(o=new w([p,r-p],[[0,-(r-2*p)]],{stroke:s,strokeWidth:2,arrow:.1*r})),8===l&&(o=new w([p,p],[[0,r-2*p]],{stroke:s,strokeWidth:2,arrow:.1*r}))}if(4===i&&(1===l&&(o=new v.i([c,u],.4*r,5,.4,{fill:s,stroke:"black"})),2===l)){var g=.1*r;o=new v.f([g,g],[[r-2*g,u-g],[0,r-2*g],[0,0]],{fill:s})}if(o){if(e.symbol&&e.remove(e.symbol),a){var y=new v.g([0,0],r,r,{fill:"white"}),b=new v.d([0,0]);b.add(y,o),e.symbol=b,e.add(b)}else e.symbol=o,e.add(o);e.symboltext=t,e.symbolcolor=n}}(e,t,n,o)}function me(e,t,n,r){var a=new v.h(e);he(a,"#"+t+n,F,r),a.render()}function fe(e,t,n,r,a){var o=t[0],i=t[1],s=null;3===t.length&&(s=be.apply(void 0,Object(l.a)(t)));var c=be(o,i),u={mode:n,x:o,y:i,newtext:a,old_normal:c.normal.text};if((c.main_grid||"normal"===n||e)&&(1!==c.lock_type||e||"color"===n)){if("reset"===n)c.center.text="",c.normal.text="",c.corner.forEach((function(e){return e.text=""})),c.side.forEach((function(e){return e.text=""})),c.r_color.options.fill=null,e&&(c.r_color_set.options.fill=null,c.fill=-1,c.symcont.symbol&&(c.symcont.remove(c.symcont.symbol),c.symcont.symbol=null,c.symcont.symboltext=""),c.boundary.forEach((function(e){e.symbol&&(e.remove(e.symbol),e.symbol=null,e.symboltext=""),e.options.fill=null,e.removeAllListener()})));else if(s)he(s,a,r);else if("normal"===n){if(e?(c.lock_type=""!==a?1:0,"#"!==a[0]&&(c.normal.options.fill=J[r],c.color=r,""!==c.normal.text&&"#"!==a[0]&&(a=c.normal.text+a))):c.normal.options.fill="rgb(29, 106, 229)",he(c,a,r),"#"!==a[0]){var d=v.j.measure(c.normal.text,c.normal.text.options);c.normal.position.x=(D-2.5*d.width)/2,c.normal.position.y=.15*D,c.center.text="",c.corner.forEach((function(e){e.text=""})),c.side.forEach((function(e){e.text=""}))}}else if("center"===n&&""===c.normal.text){var h=c.center.text,m="";if(c.center.options.fill="rgb(29, 106, 229)",""!==a)for(var f=1;f<=9;++f)(-1===h.indexOf(f)&&f===+a||-1!==h.indexOf(f)&&f!==+a)&&(m+=f);c.center.text=m;var p=v.j.measure(m,c.center.options);c.center.position.x=(D-p.width)/2,c.center.position.y=(D-p.height)/2}else if("corner"===n&&""===c.normal.text){var g="";c.corner.forEach((function(e){g+=e.text})),c.side.forEach((function(e){g+=e.text}));var y="";if(""!==a)for(var b=1;b<=9;++b)(-1===g.indexOf(b)&&b===+a||-1!==g.indexOf(b)&&b!==+a)&&(y+=b);var k=0;c.corner.forEach((function(e){e.text=y[k++]||""})),c.side.forEach((function(e){e.text=y[k++]||""}))}else"color"===n&&(e?(c.r_color_set.options.fill=J[r],c.fill=r):c.r_color.options.fill=J[r]);u.normal=c.normal.text,te.push(u)}}function pe(e,t,n,r){fe(!$,e,t,n,r)}function ve(e,t,n,r){fe(!0,e,t,n,r)}function ge(e){var t=0,n=e;K>0&&(n="#"+K+e),le?pe(le,"boundary",F,n):(We((function(e){pe([e.x,e.y],X,F,n),++t})),t>1&&te.push({mode:"group",count:t})),Q.render()}function ye(e){F=e,"color"===X&&(We((function(t){pe([t.x,t.y],"color",e,null)})),Q.render())}function be(e,t,n){if(e<0||t<0||e>=A||t>=B)return null;var r=V[t][e];return n>=0?r.boundary[n]:r}function ke(e,t){var n=be(e,t);return!n.mark&&(n.mark=!0,n.rect.options.fill="rgba(247, 208, 56, 0.5)",!0)}function we(){le&&(be.apply(void 0,Object(l.a)(le)).options.strokeWidth=0,le=null),We((function(e){e.rect.options.fill="rgba(255, 255, 255, 0)",e.mark=!1})),ie=null}function xe(e,t,n,r){!function(e,t,n){we();var r=be(e,t).boundary[n];r.options.stroke="red",r.options.strokeWidth=1,le=[e,t,n]}(t,n,r),Q.render()}function Ee(e){X=e.mode,$=e.solveMode,"cage"===e.mode&&(Z=e.cageStyle),"path"===e.mode&&(Z=e.pathStyle),"normal"!==e.mode&&"number"!==e.mode||"normal"!==e.numberStyle||(X="normal",Se((function(e){return e.boundary.forEach((function(e){e.options.fill=null,e.removeAllListener()}))})));var t=function(e){Se((function(t){return t.boundary.forEach((function(n,r){n.options.fill=n.btype===e?"rgb(0, 0, 0, 0)":null,n.removeAllListener(),n.btype===e&&n.on("mousedown",(function(e){return xe(0,t.x,t.y,r)}))}))}))};"number"===e.mode&&"corner"===e.numberStyle&&(X="boundary",t(1)),"number"===e.mode&&"side"===e.numberStyle&&(X="boundary",t(2)),"number"===e.mode&&"boundary"===e.numberStyle&&(X="boundary",t(3)),Q.render()}var je=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"setContext",value:function(e){Object(f.a)(Object(p.a)(n.prototype),"setContext",this).call(this,e),e.setLineDash([this.options.dash,this.options.dash])}}]),n}(v.e);function Se(e){for(var t=0;t<A;++t)for(var n=0;n<B;++n){e(be(t,n))}}function We(e){for(var t=0;t<A;++t)for(var n=0;n<B;++n){var r=be(t,n);r.mark&&e(r)}}function Oe(){var e=Object(_.range)(1,10),t=Array.from({length:9},(function(){return[]})),n=Array.from({length:9},(function(){return[]})),r=Array.from({length:9},(function(){return[]})),a=null;if(Se((function(e){var o=e.x-R,i=e.y-L,l=+e.normal.text;0===l&&null===a&&(a="Missing entry at ".concat(o+1,", ").concat(i+1)),n[o].push(l),t[i].push(l);var s=Math.floor(o/3)+3*Math.floor(i/3);r[s].push(l)})),a)return alert(a),!1;for(var o=0;o<9;++o){if(!Object(_.isEqual)(t[o].sort(),e))return alert("Bad row ".concat(o+1)),!1;if(!Object(_.isEqual)(n[o].sort(),e))return alert("Bad column ".concat(o+1)),!1;if(!Object(_.isEqual)(r[o].sort(),e))return alert("Bad box ".concat(o+1)),!1}return alert("OK"),!0}function Ce(){if(!$){var e=Object(_.findLastIndex)(Y,(function(e){return e.cells.find((function(e){return e[0]===ie[0]&&e[1]===ie[1]}))}));if(-1!==e)return Y[e].objs.forEach((function(e){return e.parent.remove(e)})),Y.splice(e,1),void Q.render()}var t=0;le?pe(le,"boundary",null,""):We((function(e){pe([e.x,e.y],"reset",null,""),++t})),t>1&&te.push({mode:"group",count:t}),Q.render()}function _e(){Se((function(e){pe([e.x,e.y],"reset",null,"")})),$||(Y.forEach((function(e){return e.objs.forEach((function(e){return e.parent.remove(e)}))})),Y=[]),Q.render()}function ze(){if(0!==te.length){var e=te.pop(),t=0;"group"===e.mode&&(t=e.count,e=te.pop());do{"normal"===e.mode?pe([e.x,e.y],e.mode,F,e.old_normal):"center"!==e.mode&&"corner"!==e.mode||pe([e.x,e.y],e.mode,F,e.newtext),te.pop(),--t>0&&(e=te.pop())}while(t>0);Q.render()}}function De(e,t,n){D=n.cellSize,R=n.left,P=n.right,L=n.top,I=n.bottom,A=R+n.width+P,B=L+n.height+I,U=n.gridDivWidth,G=n.gridDivHeight,T=n.gridDashed?"dash":"normal",q=n.gridDiagonals,e&&function(e){var t=Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)})),n=W.a.inflate(t),r=C.a.decode(n);1!==r.version&&alert("Bad version"),D=r.grid[0],A=r.grid[1],B=r.grid[2],R=r.grid[3],P=r.grid[4],L=r.grid[5],I=r.grid[6],U=r.grid[7],G=r.grid[8],T=r.grid[9],q=r.grid[10]}(e),N=.08*D,H=.2*D;var r=t.cloneNode(!1);t.parentNode.replaceChild(r,t),r.style.width=D*A+20+"px",r.style.height=D*B+250+"px",(Q=new v.h(r)).on("keyup",(function(e){return function(e){"Shift"===e.key&&(oe=!1)}(e)})),Q.on("mouseup",(function(){return ee=!1,void("path"===X&&ne?(Y.push({type:1,style:Z,cells:ne.cells,objs:ne.objs,color:F}),ne=null):"cage"===X&&ne&&(Y.push({type:2,style:Z,cells:ne.cells,objs:ne.objs}),ne=null))})),V=[],Y=[],te=[],ne=null,re=null,ae=null,oe=!1,ie=null;var a=D*A,o=(Q.size.x-a)/2,i={fill:"rgba(255, 255, 255, 0)",stroke:"black",strokeWidth:1,cursor:v.c.cursors.pointer},s={fill:"rgba(255, 255, 255, 0)",strokeWidth:0,cursor:v.c.cursors.pointer},c={fill:"rgba(255, 255, 255, 0)",cursor:v.c.cursors.pointer};ce.fontSize=.8*D,ue.fontSize=.3*D,re=new v.d([o,20]),Q.add(re),ae=new v.d([0,0]);var u=new v.d([0,0]),d=new v.d([0,0]),h=new v.d([0,0]);re.add(u,ae,d,h);for(var f=0;f<B;++f)V[f]=[];for(var p=D,g=M=.3*D,b=function(e){for(var t=function(t){var n=e*p,r=t*p,a=e>=R&&t>=L&&e<A-P&&t<B-I,o=new v.d([n,r]),u=new v.d([n,r]),d=new v.d([n,r]);i.strokeWidth=0;var m=new v.g([0,0],p,p,i),f=new v.g([0,0],p,p,i),b=new v.g([0,0],p,p,i),k=new v.g([0,0],p,p,i),w=new v.g([0,0],p,p,i),x=new v.g([H,H],p-2*H,p-2*H,c),j=new v.j([0,.5*p],"",ce),S=new v.j([0,.4*p],"",ue),W=[];W[0]=[N,N],W[1]=[p-N,N],W[2]=[p-N,p-N],W[3]=[N,p-N];var O=[];O[0]=[p/2,N],O[1]=[p-N,p/2],O[2]=[p/2,p-N],O[3]=[N,p/2];var C=[],_=[],M=[];if(a){de.fontSize=.25*p,W.forEach((function(e,t){(e=e.slice(0))[0]-=.025*p,e[1]-=.025*p,2!==t&&3!==t||(e[1]-=.15*p),1!==t&&2!==t||(e[0]-=.1*p),C.push(new v.j(e,"",de))})),O.forEach((function(e,t){(e=e.slice(0))[0]-=.025*p,e[1]-=.025*p,2===t&&(e[1]-=.15*p),1!==t&&3!==t||(e[1]-=.05*p),0!==t&&2!==t||(e[0]-=.025*p),1===t&&(e[0]-=.1*p),_.push(new v.j(e,"",de))}));var U=.03*D;M.push(new v.g([U,U],g,g,s)),M.push(new v.g([p-g-U,U],g,g,s)),M.push(new v.g([U,p-g-U],g,g,s)),M.push(new v.g([p-g-U,p-g-U],g,g,s)),M.push(new v.g([U,p/2-g/2],g,g,s)),M.push(new v.g([p/2-g/2,U],g,g,s)),M.push(new v.g([p-g-U,p/2-g/2],g,g,s)),M.push(new v.g([p/2-g/2,p-g-U],g,g,s)),M.push(new v.g([-g/2,-g/2],g,g,s)),M.push(new v.g([-g/2,p/2-g/2],g,g,s)),M.push(new v.g([p/2-g/2,-g/2],g,g,s)),e===A-P-1&&(M.push(new v.g([p-g/2,-g/2],g,g,s)),M.push(new v.g([p-g/2,p/2-g/2],g,g,s))),t===B-I-1&&(M.push(new v.g([-g/2,p-g/2],g,g,s)),M.push(new v.g([p/2-g/2,p-g/2],g,g,s)),M.push(new v.g([p-g/2,p-g/2],g,g,s))),M.forEach((function(e,t){t<4?(e.btype=1,e.bsize=g):t<8?(e.btype=2,e.bsize=g):(e.btype=3,e.bsize=g)}))}u.add(w,k,m,x,j,S),u.on("mousedown",(function(n){return function(e,t,n){oe||we(),le&&(be.apply(void 0,Object(l.a)(le)).options.strokeWidth=0,le=null),ie=[t,n],ee=!0,"path"===X?(ne={cells:[[t,n]],color:F}).objs=E(z,ne.cells,Z,F):"cage"===X?(ne={cells:[t,n]}).objs=y(z,ne.cells,Z):"edge"===X||ke(t,n),Q.render()}(0,e,t)})),u.on("hover",(function(){return function(e,t){ee&&("path"===X||"edge"===X||("cage"===X?(ne.objs&&ne.objs.forEach((function(e){return e.parent.remove(e)})),ne.cells.push([e,t]),ne.objs=y(z,ne.cells,Z),Q.render()):ke(e,t)&&Q.render()))}(e,t)})),u.on("mousemove",(function(n){return function(e,t,n){if(ee&&"edge"===X){var r=be(t,n),a=e.position.x-re.position.x-r.pos[0],o=e.position.y-re.position.y-r.pos[1];if((a<.4*D||a>.6*D)&&o>.4*D&&o<.6*D){a<.4*D&&(r=be(t-1,n));var i=new v.e([D,0],[[0,D]],{fill:null,strokeWidth:3,stroke:"black"});r.edge_right.add(i),Q.render()}else if((o<.4*D||o>.6*D)&&a>.4*D&&a<.6*D){o<.4*D&&(r=be(t,n-1));var l=new v.e([0,D],[[D,0]],{fill:null,strokeWidth:3,stroke:"black"});r.edge_bottom.add(l),Q.render()}}}(n,e,t)})),x.on("hover",(function(){return function(e,t){ee&&"path"===X&&(ne.objs.forEach((function(e){return e.parent.remove(e)})),ne.cells.push([e,t]),ne.objs=E(z,ne.cells,Z,F),Q.render())}(e,t)})),V[t][e]={x:e,y:t,pos:[n,r],symcont:d,cont:u,rect:m,boundary:M,fill:-1,color:null,normal:j,center:S,corner:C,side:_,corner_pos:W,edge_right:f,edge_bottom:b,r:m,r_color_set:w,r_color:k,main_grid:a},ae.add(d,u),o.add.apply(o,C.concat(_,M)),h.add(o)},n=0;n<B;++n)t(n)},k=0;k<A;++k)b(k);return function(e){var t={fill:null,stroke:"black",strokeWidth:1,dash:"dash"===T?4:0},n={fill:null,stroke:"black",strokeWidth:4};e.remove.apply(e,Object(l.a)(se));var r=A-R-P,a=B-L-I;if(se=[],q){var o={stroke:J[1],strokeWidth:4};se.push(new v.e([R*D,L*D],[[r*D,a*D]],o)),se.push(new v.e([(A-P)*D,L*D],[[-r*D,a*D]],o))}for(var i=0;i<=r;++i)se.push(new je([(R+i)*D,L*D],[[0,a*D]],i%U===0?n:t));for(var s=0;s<=a;++s)se.push(new je([R*D,(L+s)*D],[[r*D,0]],s%G===0?n:t));se.push(new v.g([R*D,L*D],r*D,a*D,n)),e.add.apply(e,Object(l.a)(se))}(d),z.scene=Q,z.underlay=ae,z.underlay2=u,z.cell_size=D,z.corner_offset=N,z.boundary_size=M,z.each_cell=Se,z.get=be,e&&function(e){var t=Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)})),n=W.a.inflate(t),r=C.a.decode(n);Y=[],Se((function(e){e.lock_type=0,e.normal.text="",e.center.text=""})),r.cells.forEach((function(e){var t=Object(m.a)(e,4),n=t[0],r=t[1],a=t[2],o=t[3];1===r?ve(n,"normal",o,a):2===r?ve(n,"color",o,a):3===r&&ve(n,"boundary",o,a)})),r.stuff.forEach((function(e){var t={type:e[0],style:e[1],color:e[2],cells:e[3]};1===t.type?t.objs=E(z,t.cells,t.style,t.color):2===t.type&&(t.objs=y(z,t.cells,t.style)),Y.push(t)}))}(e),Q.render(),null}window.addEventListener("keydown",(function(e){return function(e){var t;if("TEXTAREA"!==e.target.tagName)if("Shift"!==e.key){if("Delete"===e.key||"Backspace"===e.key)return Ce(),void e.preventDefault();if(e.key>="0"&&e.key<="9")t=e.key,K>0&&(t="#"+K+t);else{if(1!==e.key.length||!(e.key>="a"&&e.key<="z"||e.key>="A"&&e.key<="Z")||$){if(e.key.startsWith("Arrow")&&ie){var n=ie.slice();return oe||we(),ie=n,"ArrowUp"===e.key&&ie[1]>0&&(ie[1]-=1),"ArrowDown"===e.key&&ie[1]<B-1&&(ie[1]+=1),"ArrowLeft"===e.key&&ie[0]>0&&(ie[0]-=1),"ArrowRight"===e.key&&ie[0]<A-1&&(ie[0]+=1),ke(ie[0],ie[1]),void Q.render()}return}t=e.key}if(le)pe(le,"boundary",F,t);else{var r=0;We((function(e){return++r})),We((function(e){if("color"===X){var n=+t-1;n>=0&&n<=9&&pe([e.x,e.y],X,n,null)}else pe([e.x,e.y],X,F,t)})),r>1&&te.push({mode:"group",count:r})}Q.render()}else oe=!0}(e)}));var Me=n(204),Ae=n(188),Be=n(189),Re=n(190),Le=n(191),Ie=n(156),Pe=n(201),Ue=n(192),Ge=n(206),Te=n(202),qe=n(208),Ne=n(105),He=n(195),Ke=n(209),Je=n(205),Fe=n(210),Xe=n(199),Ze=n(196),$e=n(197),Qe=n(198),Ve=window.location.search,Ye=new URLSearchParams(Ve),et=Ye.get("p"),tt="1"===Ye.get("s");function nt(e){return a.a.createElement(Me.a,{open:e.open,onClose:e.onClose},a.a.createElement(Ae.a,null,"URL"),a.a.createElement(Be.a,null,a.a.createElement(Re.a,null,e.text)),a.a.createElement(Le.a,null,a.a.createElement(Ie.a,{onClick:function(){e.onClose(),window.open(e.text,"_blank").focus()}},"Open in tab"),a.a.createElement(Ie.a,{color:"primary",onClick:e.onClose},"OK")))}var rt=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var r;Object(c.a)(this,n),(r=t.call(this,e)).handleKeyDown=function(e){if(r.state.solveMode){var t=["normal","center","corner","color"],n="qwer".indexOf(e.key);if(1===e.key.length&&-1!==n)r.setMode(t[n]);else if(" "===e.key){var a=t.indexOf(r.state.mode);a=(a+1)%t.length,r.setMode(t[a])}}},r.setMode=function(e){var t=document.getElementById("button"+e);t&&t.focus(),r.setState({mode:e},(function(){Ee(r.state)}))},r.setStyle=function(e,t){r.setState(Object(s.a)({},e,t),(function(){return Ee(r.state)}))},r.generateUrl=function(){var e=function(e){var t={version:1,grid:[D,A,B,R,P,L,I,U,G,T,q],cells:[],stuff:Y.map((function(e){return[e.type,e.style,e.color,e.cells]})),desc:e};Se((function(e){var n=[e.x,e.y];1===e.lock_type&&(""!==e.normal.text&&t.cells.push([n,e.lock_type,e.normal.text,e.color]),""!==e.symcont.symboltext&&void 0!==e.symcont.symboltext&&t.cells.push([n,e.lock_type,e.symcont.symboltext,e.symcont.symbolcolor])),e.fill>=0&&t.cells.push([n,2,null,e.fill]),e.boundary.forEach((function(n,r){n.symboltext&&t.cells.push([[e.x,e.y,r],3,n.symboltext,n.symbolcolor])}))})),console.log(t);var n=C.a.encode(t),r=W.a.deflate(n),a=btoa(String.fromCharCode.apply(String,Object(l.a)(r)));return window.location.origin+"/?s=1&p="+encodeURIComponent(a)}(r.state.description);r.setState({dialogText:e,dialogOpen:!0})},r.handleChange=function(e,t){r.setState(Object(s.a)({},e.target.parentNode.id,t))},r.setGrid=function(){De(et,document.getElementById("canvas"),r.state),Ee(r.state)},r.setSymbolPage=function(e){var t;r.setState({symbolPage:e.target.value},(function(){if(+r.state.symbolPage>0)for(var e=0;e<9;++e)r.symbolRef[e].current.children[0].innerHTML="",me(r.symbolRef[e].current.children[0],r.state.symbolPage,e+1,30)})),t=+e.target.value,K=t},r.setGridState=function(e,t){r.setState(Object(s.a)({},e,t),(function(){De(et,document.getElementById("canvas"),r.state),Ee(r.state)}))},r.canvasRef=a.a.createRef(),r.symbolRef=[];for(var o=0;o<9;++o)r.symbolRef.push(a.a.createRef());return r.state={solveMode:tt,settingsMode:"size",color:0,description:"",cellSize:64,width:9,height:9,left:0,right:0,top:0,bottom:0,gridDivWidth:3,gridDivHeight:3,gridDashed:!1,gridDiagonals:!1,mode:tt?"normal":"number",numberStyle:"normal",cageStyle:"dash",pathStyle:"arrow",dialogOpen:!1,dialogText:"",seconds:0,timeStatus:!0,symbolPage:"0"},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t="";et&&(t=function(e){var t=Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)})),n=W.a.inflate(t);return C.a.decode(n).desc}(et)),this.setState({description:t},(function(){De(et,e.canvasRef.current,e.state),Ee(e.state)})),document.addEventListener("keydown",this.handleKeyDown),this.interval=setInterval((function(){e.state.timeStatus&&e.setState({seconds:e.state.seconds+1})}),1e3)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),clearInterval(this.interval)}},{key:"numberStyleBox",value:function(){var e=this;return a.a.createElement(Pe.a,{margin:"10px"},a.a.createElement(Ue.a,{fullWidth:!0},a.a.createElement(Ge.a,{shrink:!0,id:"numberstyle-label"},"Style"),a.a.createElement(Te.a,{labelId:"numberstyle-label",fullWidth:!0,value:this.state.numberStyle,onChange:function(t){return e.setStyle("numberStyle",t.target.value)}},a.a.createElement(qe.a,{value:"normal"},"Normal"),a.a.createElement(qe.a,{value:"corner"},"Corner"),a.a.createElement(qe.a,{value:"side"},"Side"),a.a.createElement(qe.a,{value:"boundary"},"Boundary"))))}},{key:"cageStyleBox",value:function(){var e=this;return a.a.createElement(Pe.a,{margin:"10px"},a.a.createElement(Ue.a,{fullWidth:!0},a.a.createElement(Ge.a,{shrink:!0,id:"cagestyle-label"},"Style"),a.a.createElement(Te.a,{labelId:"cagestyle-label",fullWidth:!0,value:this.state.cageStyle,onChange:function(t){return e.setStyle("cageStyle",t.target.value)}},a.a.createElement(qe.a,{value:"dash"},"Dashed"),a.a.createElement(qe.a,{value:"edge"},"Edge"))))}},{key:"pathStyleBox",value:function(){var e=this;return a.a.createElement(Pe.a,{margin:"10px"},a.a.createElement(Ue.a,{fullWidth:!0},a.a.createElement(Ge.a,{shrink:!0,id:"pathstyle-label"},"Style"),a.a.createElement(Te.a,{labelId:"pathstyle-label",fullWidth:!0,value:this.state.pathStyle,onChange:function(t){return e.setStyle("pathStyle",t.target.value)}},a.a.createElement(qe.a,{value:"thin"},"Line"),a.a.createElement(qe.a,{value:"fat"},"Fat Line"),a.a.createElement(qe.a,{value:"thermo"},"Thermo"),a.a.createElement(qe.a,{value:"arrow"},"Arrow"),a.a.createElement(qe.a,{value:"arrowcircle"},"Arrow with circle"),a.a.createElement(qe.a,{value:"roundborder"},"Round border"),a.a.createElement(qe.a,{value:"border"},"Border"),a.a.createElement(qe.a,{value:"roundfill"},"Round fill"),a.a.createElement(qe.a,{value:"squarefill"},"Square fill"))))}},{key:"timerBox",value:function(){var e=this;return a.a.createElement(Pe.a,{minWidth:"250px"},a.a.createElement(Pe.a,{margin:"20px",padding:"10px",boxShadow:3},a.a.createElement(Ne.a,{align:"center",variant:"h4"},new Date(1e3*this.state.seconds).toISOString().substr(11,8)),a.a.createElement(He.a,{fullWidth:!0,size:"large"},a.a.createElement(Ie.a,{onClick:function(){return e.setState({timeStatus:!0})}},a.a.createElement(Ze.a,null)),a.a.createElement(Ie.a,{onClick:function(){return e.setState({timeStatus:!1})}},a.a.createElement($e.a,null)),a.a.createElement(Ie.a,{onClick:function(){return e.setState({seconds:0,timeStatus:!1})}},a.a.createElement(Qe.a,null)))),""!==this.state.description&&a.a.createElement(Pe.a,{margin:"20px"},a.a.createElement(Ke.a,{multiline:!0,variant:"outlined",InputProps:{readOnly:!0},value:this.state.description})),a.a.createElement(Pe.a,{margin:"20px"},a.a.createElement(Ke.a,{multiline:!0,variant:"outlined"})))}},{key:"settingLeftBox",value:function(){var e=this;return a.a.createElement(Pe.a,{minWidth:"250px"},a.a.createElement(Pe.a,{margin:"30px"},a.a.createElement(Te.a,{fullWidth:!0,value:this.state.mode,onChange:function(t){return e.setMode(t.target.value)}},a.a.createElement(qe.a,{value:"number"},"Number"),a.a.createElement(qe.a,{value:"cage"},"Cage"),a.a.createElement(qe.a,{value:"path"},"Path"),a.a.createElement(qe.a,{value:"color"},"Color")),"number"===this.state.mode&&this.numberStyleBox(),"cage"===this.state.mode&&this.cageStyleBox(),"path"===this.state.mode&&this.pathStyleBox()),a.a.createElement(Pe.a,{margin:"30px"},a.a.createElement(He.a,{fullWidth:!0,size:"large",variant:"contained",orientation:"vertical"},a.a.createElement(Ie.a,{onClick:this.generateUrl},"Generate URL"))),a.a.createElement(Pe.a,{margin:"30px"},a.a.createElement(Te.a,{fullWidth:!0,value:this.state.settingsMode,onChange:function(t){return e.setState({settingsMode:t.target.value})}},a.a.createElement(qe.a,{value:"size"},"Size"),a.a.createElement(qe.a,{value:"margins"},"Margins"),a.a.createElement(qe.a,{value:"grid"},"Grid"),a.a.createElement(qe.a,{value:"description"},"Description"))),"size"===this.state.settingsMode&&a.a.createElement(Pe.a,{margin:"30px",padding:"10px",boxShadow:3},this.sizeSlider("cellSize"),this.sizeSlider("width"),this.sizeSlider("height")),"margins"===this.state.settingsMode&&a.a.createElement(Pe.a,{margin:"30px",padding:"10px",boxShadow:3},this.sizeSlider("left"),this.sizeSlider("right"),this.sizeSlider("top"),this.sizeSlider("bottom")),"grid"===this.state.settingsMode&&a.a.createElement(Pe.a,{margin:"30px",padding:"10px",boxShadow:3},this.sizeSlider("gridDivWidth"),this.sizeSlider("gridDivHeight"),a.a.createElement(Ne.a,null,"Dashed"),a.a.createElement(Je.a,{checked:this.state.gridDashed,onChange:function(t){e.setGridState("gridDashed",t.target.checked)}}),a.a.createElement(Ne.a,null,"Diagonals"),a.a.createElement(Je.a,{checked:this.state.gridDiagonals,onChange:function(t){e.setGridState("gridDiagonals",t.target.checked)}})),"description"===this.state.settingsMode&&a.a.createElement(Pe.a,{margin:"30px",padding:"10px",boxShadow:3},a.a.createElement(Ke.a,{multiline:!0,rows:8,value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})))}},{key:"sizeSlider",value:function(e){var t={cellSize:{label:"Cell size",min:32,max:96,step:4,marks:!0},width:{label:"Width",min:3,max:30,step:1,marks:!1},height:{label:"Height",min:3,max:30,step:1,marks:!1},gridDivWidth:{label:"Grid divider width",min:0,max:10,step:1,marks:!1},gridDivHeight:{label:"Grid divider height",min:0,max:10,step:1,marks:!1},left:{label:"Left margin",min:0,max:10,step:1,marks:!1},right:{label:"Right margin",min:0,max:10,step:1,marks:!1},top:{label:"Top margin",min:0,max:10,step:1,marks:!1},bottom:{label:"Bottom margin",min:0,max:10,step:1,marks:!1}}[e];return a.a.createElement(Pe.a,null,a.a.createElement(Ne.a,null,t.label,": ",this.state[e]),a.a.createElement(Fe.a,{value:this.state[e],min:t.min,max:t.max,step:t.step,marks:t.marks,id:e,onChange:this.handleChange,onChangeCommitted:this.setGrid}))}},{key:"colorGrid",value:function(e){return J.slice(0,e).map((function(e,t){return a.a.createElement(Xe.a,{key:t,item:!0,xs:4},a.a.createElement(Ie.a,{variant:"outlined",onClick:function(){return ye(t)}},a.a.createElement("div",{style:{border:"1px solid black",background:e,width:"30px",height:"30px"}})))}))}},{key:"renderSolveMode",value:function(){var e=this;return a.a.createElement(Pe.a,{display:"flex",flexDirection:"row"},this.timerBox(),a.a.createElement(Pe.a,{display:"flex"},a.a.createElement("div",{id:"canvas",ref:this.canvasRef})),a.a.createElement(Pe.a,{minWidth:"250px",maxWidth:"250px"},a.a.createElement(Pe.a,{margin:"30px"},a.a.createElement(He.a,{fullWidth:!0,size:"large",variant:"contained",orientation:"vertical"},[["normal","Normal"],["center","Center"],["corner","Corner"],["color","Color"]].map((function(t){return a.a.createElement(Ie.a,{id:"button"+t[0],key:t[0],color:e.state.mode===t[0]?"primary":"default",onClick:function(){return e.setMode(t[0])}},t[1])})))),a.a.createElement(Pe.a,{margin:"30px"},a.a.createElement(He.a,{fullWidth:!0,size:"large",variant:"contained",orientation:"vertical"},a.a.createElement(Ie.a,{onClick:_e},"Reset"),a.a.createElement(Ie.a,{onClick:Oe},"Check"),a.a.createElement(Ie.a,{onClick:ze},"Undo"),a.a.createElement(Ie.a,{onClick:Ce},"Delete"))),a.a.createElement(Pe.a,{margin:"30px"},a.a.createElement(Xe.a,{container:!0},"color"===this.state.mode&&this.colorGrid(9),"color"!==this.state.mode&&Object(l.a)(Array(9).keys()).map((function(e){return a.a.createElement(Xe.a,{key:e,item:!0,xs:4},a.a.createElement(Ie.a,{variant:"outlined",onClick:function(){return ge(e+1)}},a.a.createElement("div",{style:{fontSize:"20px"}},e+1)))}))))))}},{key:"renderSetMode",value:function(){var e=this;return a.a.createElement(Pe.a,{display:"flex",flexDirection:"row"},a.a.createElement(nt,{text:this.state.dialogText,open:this.state.dialogOpen,onClose:function(){return e.setState({dialogOpen:!1})}}),this.settingLeftBox(),a.a.createElement(Pe.a,{display:"flex"},a.a.createElement("div",{id:"canvas",ref:this.canvasRef})),a.a.createElement(Pe.a,{minWidth:"250px",maxWidth:"250px"},a.a.createElement(Pe.a,{margin:"30px"},a.a.createElement(He.a,{fullWidth:!0,size:"large",variant:"contained",orientation:"vertical"},a.a.createElement(Ie.a,{onClick:_e},"Reset"),a.a.createElement(Ie.a,{onClick:Oe},"Check"),a.a.createElement(Ie.a,{onClick:ze},"Undo"),a.a.createElement(Ie.a,{onClick:Ce},"Delete"))),a.a.createElement(Pe.a,{margin:"30px"},a.a.createElement(Xe.a,{container:!0},"color"!==this.state.mode&&J.slice(0,9).map((function(t,n){return a.a.createElement(Xe.a,{key:n,item:!0,xs:4},a.a.createElement(Ie.a,{variant:e.state.color===n?"contained":"outlined",onClick:function(){e.setState({color:n}),ye(n)}},a.a.createElement("div",{style:{border:"1px solid black",background:t,width:"30px",height:"30px"}})))})),"color"!==this.state.mode&&J.slice(9).map((function(t,n){return a.a.createElement(Xe.a,{key:n,item:!0,xs:4},a.a.createElement(Ie.a,{variant:e.state.color===n+9?"contained":"outlined",onClick:function(){e.setState({color:n+9}),ye(n+9)}},a.a.createElement("div",{style:{border:"1px solid black",background:t,width:"30px",height:"30px"}})))})),"color"===this.state.mode&&this.colorGrid(),"number"===this.state.mode&&a.a.createElement(Ue.a,{fullWidth:!0},a.a.createElement(Te.a,{fullWidth:!0,value:this.state.symbolPage,onChange:this.setSymbolPage},["Numbers","Circles","Arrows","Arrows 2","Misc"].map((function(e,t){return a.a.createElement(qe.a,{key:e,value:t},e)})))),"number"===this.state.mode&&Object(l.a)(Array(9).keys()).map((function(t){return a.a.createElement(Xe.a,{key:t,item:!0,xs:4},a.a.createElement(Ie.a,{variant:"outlined",onClick:function(){return ge(t+1)}},0===+e.state.symbolPage&&a.a.createElement("div",{style:{fontSize:"20px"}},t+1),+e.state.symbolPage>0&&a.a.createElement("div",{ref:e.symbolRef[t]},a.a.createElement("div",{style:{width:"30px",height:"30px"}}))))}))))))}},{key:"render",value:function(){return this.state.solveMode?this.renderSolveMode():this.renderSetMode()}}]),n}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(rt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[119,1,2]]]);
//# sourceMappingURL=main.3a0f08d6.chunk.js.map